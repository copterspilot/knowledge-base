### Краткая суть

*   **ACL (Access Control List):** Списки прав доступа (**Кто** → может совершить **Что** → над **Чем**).
    *   *Пример: "Пользователь `alice` может `читать` файл `report.txt`".*

*   **ABAC (Attribute-Based Access Control):** Определение доступа на основе атрибутов с помощью логических правил (**Если** → **атрибут** имеет значение → **то разрешить**).
    *   *Пример: "`Разрешить` `чтение` файла `если` `роль пользователя` == `manager` `И` `департамент пользователя` == `департамент файла` `И` `время` между 9:00 и 18:00".*

---

### Детальное сравнение

| Параметр | ACL (Access Control List) | ABAC (Attribute-Based Access Control) |
| :--- | :--- | :--- |
| **Подход** | **Директивный, список разрешений** | **Декларативный, на основе правил и атрибутов** |
| **Основной вопрос** | "Есть ли пользователь X в списке разрешений для ресурса Y?" | "Соответствует ли запрос пользователя набору правил для ресурса?" |
| **Гранулярность** | **Статическая, на уровне ресурса/объекта.** Трудно управлять правами на основе контекста. | **Очень высокая, динамическая.** Можно регулировать доступ на основе множества параметров. |
| **Масштабируемость** | **Плохая.** Для сложных систем списки становятся огромными и неуправляемыми ("взрыв правил"). | **Отличная.** Одно правило может покрыть тысячи пользователей и ресурсов. |
| **Гибкость** | **Низкая.** Изменения в политиках требуют ручного редактирования списков для каждого ресурса. | **Очень высокая.** Изменение бизнес-логики требует правки всего нескольких централизованных правил. |
| **Контекст** | **Не учитывает.** Решение о доступе принимается только на основе идентификатора пользователя и ресурса. | **Учитывает.** Решение принимается на основе множества атрибутов (пользователь, ресурс, действие, время, местоположение, др.). |
| **Пример из жизни** | **Список гостей на свадьбу.** Имена написаны на двери. Если вашего имени нет в списке — вас не пустят. | **Пропуск в офис.** Система проверяет: вашу **должность** (атрибут), **компанию** (атрибут), **день недели** (контекст) и **зону доступа** на вашем бейдже (атрибут). |

---

### Примеры

#### Пример ACL
Ресурс: Документ `Финансовый_отчет_2024.docx`

| Пользователь | Разрешение |
| :--- | :--- |
| `alice` | `read` |
| `bob` | `read`, `write` |
| `charlie` | `deny` |

**Проблема:** Если в компании 10 000 менеджеров, и каждый должен получить доступ к этому отчету, администратору придется вручную добавить всех 10 000 пользователей в этот список.

#### Пример ABAC
Правило для доступа к документам:
```python
# Псевдокод правила ABAC
IF (
    user.role == "manager" AND
    user.department == resource.department AND
    resource.category == "financial" AND
    current_time.between("09:00", "18:00") AND
    user.location == "office"
)
THEN PERMIT "read"
```

**Преимущество:** Это одно правило автоматически применяется ко *всем* пользователям с ролью `manager`, ко *всем* финансовым документам и *всем* отделам. Не нужно никого вручную добавлять в списки.

---

### Плюсы и минусы

#### ACL
**Плюсы (+):**
+   Простота понимания и реализации для простых случаев.
+   Прямой и явный контроль над конкретными объектами.

**Минусы (-):**
-   **Плохо масштабируется.** Количество записей растет как произведение числа пользователей на число объектов.
-   **Сложность администрирования.** Изменение политики требует обхода огромного количества списков.
-   **Отсутствие контекста.** Невозможно легко ввести правило "только из корпоративной сети".
-   **Проблема наследования.** Сложно управлять правами на группы объектов.

#### ABAC
**Плюсы (+):**
+   **Отличная масштабируемость.** Одно правило заменяет тысячи записей ACL.
+   **Гибкость и богатый контекст.** Можно реализовать сложные бизнес-требования (геолокация, время, MFA).
+   **Централизованное управление.** Политики легко изменять и аудировать.

**Минусы (-):**
-   **Сложность.** Требует тщательного проектирования модели атрибутов и правил.
-   **Производительность.** Каждый запрос требует оценки нескольких атрибутов и применения правил, что может создать нагрузку.
-   **Порог входа.** Более сложен для понимания и настройки по сравнению с ACL.

---

### Что и когда использовать?

*   **Используйте ACL,** когда:
    *   У вас простая, небольшая система.
    *   У вас есть несколько пользователей и ресурсов.
    *   Права доступа уникальны для каждого ресурса и не поддаются обобщению правилами.
    *   Пример: права на файлы в маленькой сетевой папке, блог с ограниченным кругом авторов.

*   **Используйте ABAC,** когда:
    *   Ваша система крупная и сложная (корпоративные приложения, облачные платформы).
    *   Требуется реализовать сложные compliance-требования (GDPR, HIPAA).
    *   Вам нужен контекстный доступ (блокировка входа из небезопасных мест, проверка времени).
    *   Пример: SAP, Salesforce, AWS IAM Policies, корпоративные порталы.

### Эволюция и связь

Часто эти модели не исключают, а дополняют друг друга. **RBAC** (Role-Based Access Control) является своего рода промежуточным звеном между ними, группируя пользователей в роли.

Современные системы (например, AWS) часто используют гибридный подход:
*   **ABAC** используется для определения **политик** высокого уровня на основе тегов (атрибутов) ресурсов и пользователей.
*   **ACL** может использоваться на низком уровне для точечных исключений из этих политик.

**Итог:** **ACL** — это винтовка, которая точно стреляет по одной цели. **ABAC** — это умная система наведения, которая может одновременно управлять доступом для целой армии, основываясь на множестве параметров. Выбор инструмента зависит от масштаба и сложности вашей задачи.