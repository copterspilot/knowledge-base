### üîê –ß—Ç–æ —Ç–∞–∫–æ–µ ECDH?

**ECDH** —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ **Elliptic Curve Diffie-Hellman** ‚Äî —ç—Ç–æ **–ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞ –∫–ª—é—á–∞–º–∏**, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ **—ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏—Ö –∫—Ä–∏–≤—ã—Ö**.

–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–≤—É–º —Å—Ç–æ—Ä–æ–Ω–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∏–µ–Ω—Ç—É –∏ —Å–µ—Ä–≤–µ—Ä—É) **–±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã—Ä–∞–±–æ—Ç–∞—Ç—å –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á** –ø–æ –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É, **–Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—è —Å–∞–º –∫–ª—é—á**.

---

### üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)

1. –û–±–µ —Å—Ç–æ—Ä–æ–Ω—ã (–ê–ª–∏—Å–∞ –∏ –ë–æ–±) –∑–∞—Ä–∞–Ω–µ–µ –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞—é—Ç—Å—è –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ **—ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–æ–π –∫—Ä–∏–≤–æ–π** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `secp256r1`).
2. –ö–∞–∂–¥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:
   - **–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á** (—Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ),
   - **–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á** (—Ç–æ—á–∫–∞ –Ω–∞ –∫—Ä–∏–≤–æ–π, –≤—ã—á–∏—Å–ª—è–µ–º–∞—è –∫–∞–∫ `–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á √ó –±–∞–∑–æ–≤–∞—è —Ç–æ—á–∫–∞`).
3. –°—Ç–æ—Ä–æ–Ω—ã –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ (–ø–æ –æ—Ç–∫—Ä—ã—Ç–æ–º—É –∫–∞–Ω–∞–ª—É).
4. –ö–∞–∂–¥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç **–æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç** –∫–∞–∫:
   - `—Å–µ–∫—Ä–µ—Ç = –ø—Ä–∏–≤–∞—Ç–Ω—ã–π_–∫–ª—é—á_—Å–≤–æ–µ–≥–æ √ó –ø—É–±–ª–∏—á–Ω—ã–π_–∫–ª—é—á_–≤—Ç–æ—Ä–æ–≥–æ`
5. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø–æ–ª—É—á–∞—é—Ç **–æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞**, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ **—Å–µ—Å—Å–∏–æ–Ω–Ω—ã–π –∫–ª—é—á** –¥–ª—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, AES).

> üîë –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è: –¥–∞–∂–µ –µ—Å–ª–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏, –æ–Ω **–Ω–µ —Å–º–æ–∂–µ—Ç –≤—ã—á–∏—Å–ª–∏—Ç—å –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç** –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏ –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏—Ö –∫—Ä–∏–≤—ã—Ö.

---

### ‚úÖ –ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ECDH?

#### üìå –û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
> **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –æ–±—â–µ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞** –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞.

#### üõ† –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:
- **TLS 1.2 / TLS 1.3** ‚Äî –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ HTTPS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
- **mTLS (mutual TLS)** ‚Äî –≤ —Å–µ—Ä–≤–∏—Å-—Å–µ—Ç—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, Istio, Linkerd).
- **SSH**, **IPsec**, **Signal Protocol** –∏ –¥—Ä.

#### üåê –ü—Ä–∏–º–µ—Ä –≤ DevOps:
–ö–æ–≥–¥–∞ –≤–∞—à –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –≤ Kubernetes (—á–µ—Ä–µ–∑ sidecar Envoy) —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–æ–º —Å –ø–æ–º–æ—â—å—é **Istio mTLS**, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **ECDH**, —á—Ç–æ–±—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã—Ä–∞–±–æ—Ç–∞—Ç—å —Å–µ—Å—Å–∏–æ–Ω–Ω—ã–π –∫–ª—é—á.

---

### üîç –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ECDH –ø–µ—Ä–µ–¥ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º DH

| –ü–∞—Ä–∞–º–µ—Ç—Ä                             | –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π DH | ECDH                             |
| ------------------------------------ | --------------- | -------------------------------- |
| –î–ª–∏–Ω–∞ –∫–ª—é—á–∞ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Å—Ç–æ–π–∫–æ—Å—Ç–∏ | 2048‚Äì4096 –±–∏—Ç   | 256‚Äì384 –±–∏—Ç                      |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å                   | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ       | –ë—ã—Å—Ç—Ä–µ–µ                          |
| –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤                 | –í—ã—à–µ            | –ù–∏–∂–µ                             |
| –£—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏                 | –•–æ—Ä–æ—à–∏–π         | –û—Ç–ª–∏—á–Ω—ã–π (–ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫—Ä–∏–≤–æ–π) |

üëâ –¢–æ –µ—Å—Ç—å **ECDH –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç—É –∂–µ (–∏–ª–∏ –≤—ã—à–µ) –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–µ–Ω—å—à–∏—Ö –∫–ª—é—á–∞—Ö –∏ –Ω–∞–≥—Ä—É–∑–∫–µ** ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.

---

### üß© –ü—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏

–ö–æ–≥–¥–∞ –≤—ã –∑–∞—Ö–æ–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç `https://otus.ru`:

1. –ë—Ä–∞—É–∑–µ—Ä –∏ —Å–µ—Ä–≤–µ—Ä –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞—é—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **ECDHE** (ECDH —Å forward secrecy).
2. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–π **–ø—É–±–ª–∏—á–Ω—ã–π ECDH-–∫–ª—é—á**.
3. –ë—Ä–∞—É–∑–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–≤–æ–π –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ.
4. –û–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –≤—ã—á–∏—Å–ª—è—é—Ç **–æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç**.
5. –≠—Ç–æ—Ç —Å–µ–∫—Ä–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ AES-GCM).

> üí° –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **ECDHE** (—Å –±—É–∫–≤–æ–π "E" ‚Äî ephemeral), —Ç–æ –∫–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è **–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ** –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ ‚Äî —ç—Ç–æ –¥–∞—ë—Ç **perfect forward secrecy (PFS)**: –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞ –±—É–¥–µ—Ç —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω, –ø—Ä–æ—à–ª—ã–µ —Å–µ—Å—Å–∏–∏ –Ω–µ–ª—å–∑—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å.

---

### üìö –ö—Ä–∞—Ç–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (–¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)

> **ECDH** ‚Äî —ç—Ç–æ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –¥–≤—É–º —Å—Ç–æ—Ä–æ–Ω–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã—Ä–∞–±–æ—Ç–∞—Ç—å –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏—Ö –∫—Ä–∏–≤—ã—Ö, –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ –∫–ª—é—á–∞ –ø–æ —Å–µ—Ç–∏.

---

### üéØ –í—ã–≤–æ–¥

- **ECDH** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±–º–µ–Ω–∞ –∫–ª—é—á–∞–º–∏.
- –®–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **TLS/mTLS**, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏**.
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ ECDH –ø–æ–º–æ–≥–∞–µ—Ç –≥–ª—É–±–∂–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ —Ç–æ–º, **–∫–∞–∫ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** –≤ Kubernetes, —Å–µ—Ä–≤–∏—Å-–º–µ—à–∞—Ö –∏ CI/CD.

---
