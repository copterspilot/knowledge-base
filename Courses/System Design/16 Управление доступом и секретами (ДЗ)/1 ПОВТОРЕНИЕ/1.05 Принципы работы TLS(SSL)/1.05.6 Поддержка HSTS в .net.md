–í .NET 9 –ø–æ–¥–¥–µ—Ä–∂–∫–∞ HSTS (HTTP Strict Transport Security) —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ middleware –∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã:

## üîß **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è HSTS –≤ .NET 9**

### **1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ middleware:**
```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ HSTS middleware
app.UseHsts();

app.Run();
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ HSTS:**
```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

// –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ HSTS
app.UseHsts(hsts => hsts
    .MaxAge(days: 365)           // –í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏
    .IncludeSubdomains()         // –ü—Ä–∏–º–µ–Ω—è—Ç—å –∫–æ –≤—Å–µ–º –ø–æ–¥–¥–æ–º–µ–Ω–∞–º
    .Preload()                   // –í–∫–ª—é—á–µ–Ω–∏–µ –≤ preload —Å–ø–∏—Å–∫–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤
);

app.Run();
```

### **3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ appsettings.json:**
```json
{
  "Kestrel": {
    "Endpoints": {
      "Https": {
        "Url": "https://localhost:5001"
      }
    }
  },
  "Hsts": {
    "MaxAge": "31536000",        // 1 –≥–æ–¥ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    "IncludeSubdomains": true,
    "Preload": true,
    "Enabled": true
  }
}
```

### **4. –£—Å–ª–æ–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥:**
```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

// –í–∫–ª—é—á–∞–µ–º HSTS —Ç–æ–ª—å–∫–æ –≤ Production —Å—Ä–µ–¥–µ
if (!app.Environment.IsDevelopment())
{
    app.UseHsts(hsts => hsts
        .MaxAge(days: 365)
        .IncludeSubdomains()
        .Preload()
    );
}

app.Run();
```

## üõ°Ô∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Kestrel –¥–ª—è HTTPS + HSTS:**
```csharp
builder.WebHost.ConfigureKestrel(serverOptions =>
{
    serverOptions.ConfigureHttpsDefaults(httpsOptions =>
    {
        httpsOptions.SslProtocols = SslProtocols.Tls12 | SslProtocols.Tls13;
    });
});

var app = builder.Build();

// Middleware –ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω!
app.UseHsts();  // –î–æ–ª–∂–µ–Ω –∏–¥—Ç–∏ –ø–µ—Ä–µ–¥ UseHttpsRedirection
app.UseHttpsRedirection();
```

## ‚öôÔ∏è **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```csharp
app.UseHsts(hsts => 
{
    hsts.MaxAge(days: 365);              // –í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è
    hsts.IncludeSubdomains();            // –î–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
    hsts.Preload();                      // –î–ª—è preload —Å–ø–∏—Å–∫–æ–≤
    hsts.AllPortsWithHttpsRedirect();    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ—Ä—Ç–æ–≤
});
```

## üìä **–ü—Ä–æ–≤–µ—Ä–∫–∞ HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∞:**
```csharp
// Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∞ –≤ –æ—Ç–≤–µ—Ç–µ
app.Use(async (context, next) =>
{
    await next();
    if (context.Response.Headers.ContainsKey("Strict-Transport-Security"))
    {
        var hstsHeader = context.Response.Headers["Strict-Transport-Security"];
        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
    }
});
```

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production:**

1. **–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–∞–ª–æ–≥–æ max-age** –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
2. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IncludeSubdomains()** –µ—Å–ª–∏ –≤—Å–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã HTTPS
3. **–û—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å Preload** - —Å–ª–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ —Å–ø–∏—Å–∫–æ–≤ –±—Ä–∞—É–∑–µ—Ä–æ–≤
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–±–æ—Ç—É –≤ Development —Å—Ä–µ–¥–µ** –ø–µ—Ä–µ–¥ Production
