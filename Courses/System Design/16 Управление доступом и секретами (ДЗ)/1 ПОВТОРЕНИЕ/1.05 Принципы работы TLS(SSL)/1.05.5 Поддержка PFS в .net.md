–í .NET 9 –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Perfect Forward Secrecy (PFS) —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **—ç—Ñ–µ–º–µ—Ä–Ω—ã—Ö Diffie-Hellman (DHE/ECDHE) cipher suites** –≤ TLS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã:

## üîß **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è PFS –≤ .NET 9**

### **1. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö TLS –≤–µ—Ä—Å–∏–π:**
```csharp
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Kestrel –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TLS 1.2/1.3 —Å PFS
builder.WebHost.ConfigureKestrel(serverOptions =>
{
    serverOptions.ConfigureHttpsDefaults(httpsOptions =>
    {
        httpsOptions.SslProtocols = SslProtocols.Tls12 | SslProtocols.Tls13;
        // PFS –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ECDHE cipher suites –≤ TLS 1.3
    });
});
```

### **2. Cipher Suites —Å PFS:**
.NET 9 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ cipher suites, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–µ PFS:
- **TLS 1.3:** –í—Å–µ cipher suites –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç PFS
- **TLS 1.2:** ECDHE-RSA-AES256-GCM-SHA384, ECDHE-RSA-AES128-GCM-SHA256

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HttpClient —Å PFS:**
```csharp
var handler = new SocketsHttpHandler
{
    SslOptions = new SslClientAuthenticationOptions
    {
        EnabledSslProtocols = SslProtocols.Tls12 | SslProtocols.Tls13,
    }
};

var httpClient = new HttpClient(handler);
```

## üõ°Ô∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ appsettings.json:**
```json
{
  "Kestrel": {
    "Endpoints": {
      "Https": {
        "Url": "https://localhost:5001",
        "Certificate": {
          "Path": "certificate.pfx",
          "Password": "password"
        }
      }
    },
    "Certificates": {
      "Default": {
        "Path": "certificate.pfx",
        "Password": "password"
      }
    }
  }
}
```

## ‚öôÔ∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:**

### **–î–ª—è —Å–µ—Ä–≤–µ—Ä–∞ (Kestrel):**
```csharp
builder.WebHost.ConfigureKestrel(options =>
{
    options.ConfigureHttpsDefaults(httpsOptions =>
    {
        httpsOptions.SslProtocols = SslProtocols.Tls12 | SslProtocols.Tls13;
        httpsOptions.ClientCertificateMode = ClientCertificateMode.NoCertificate;
        // PFS –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å TLS 1.3
    });
});
```

### **–î–ª—è –∫–ª–∏–µ–Ω—Ç–∞:**
```csharp
var socketsHttpHandler = new SocketsHttpHandler
{
    SslOptions = new SslClientAuthenticationOptions
    {
        EnabledSslProtocols = SslProtocols.Tls12 | SslProtocols.Tls13,
        // Cipher suites —Å PFS –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    }
};

using var httpClient = new HttpClient(socketsHttpHandler);
```

## üìä **–ü—Ä–æ–≤–µ—Ä–∫–∞ PFS:**

### **–ß–µ—Ä–µ–∑ OpenSSL:**
```bash
openssl s_client -connect localhost:5001 -tls1_3
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ECDHE cipher suites
```

### **–ß–µ—Ä–µ–∑ –∫–æ–¥:**
```csharp
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
var response = await httpClient.GetAsync("https://localhost:5001");
var tlsVersion = response.Headers.GetValues("X-SSL-Protocol").FirstOrDefault();
```

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ .NET 9:**

1. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TLS 1.3** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ PFS
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ECDHE –∞–ª–≥–æ—Ä–∏—Ç–º—ã** - –ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
3. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ cipher suites** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –û–°** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
