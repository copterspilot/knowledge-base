### **SOA (Service-Oriented Architecture, сервис-ориентированная архитектура)**
**Определение:**  
Архитектурный стиль, где приложение состоит из **крупных, слабосвязанных сервисов**, взаимодействующих через стандартные протоколы (SOAP, REST, ESB).  

**Ключевые черты:**  
- Сервисы **крупные** (например, «Учёт клиентов», «Платежи»).  
- Централизованное управление (ESB — Enterprise Service Bus).  
- Акцент на **повторное использование** сервисов.  
- Часто используется в корпоративных системах (ERP, банки).  

**Пример:**  
Система банка:  
- Сервис «Кредиты» (SOAP).  
- Сервис «Платежи» (REST).  
- Все общаются через **ESB**.  

---

### **Микросервисная архитектура (Microservices)**
**Определение:**  
Архитектура, где приложение разбито на **мелкие, независимые сервисы**, каждый из которых решает одну бизнес-задачу.  

**Ключевые черты:**  
- Сервисы **мелкие** (например, «Отправка email», «Аутентификация»).  
- Децентрализованное управление (API Gateway, Service Mesh).  
- Акцент на **гибкость и масштабируемость**.  
- Подходит для облачных и agile-разработки.  

**Пример:**  
Стриминговый сервис:  
- Сервис «Рекомендации» (gRPC).  
- Сервис «Биллинг» (REST).  
- Сервис «Транскодирование видео» (Kafka + Go).  

---

## **2. Основные различия**

| Критерий               | SOA                          | Микросервисы                  |  
|------------------------|------------------------------|--------------------------------|  
| **Размер сервисов**    | Крупные (монолитные модули)  | Мелкие (1 сервис = 1 функция) |  
| **Связность**          | Слабая, но есть ESB          | Полная независимость          |  
| **Протоколы**         | SOAP, REST, XML              | REST, gRPC, GraphQL           |  
| **Управление**        | Централизованное (ESB)       | Децентрализованное (API Gateway) |  
| **Масштабируемость**  | Горизонтальная (редко)       | Автоматическое (Kubernetes)    |  
| **Где используется**  | Корпоративные системы        | Облачные приложения, стартапы  |  
| **Недостатки**       | Сложность ESB, медленные изменения | Сложность мониторинга распределённых сервисов |  

---

## **3. Когда что выбирать?**  

### **SOA подходит, если:**  
- У вас **legacy-системы** (например, банковский софт на Java EE).  
- Нужна **интеграция с ERP** (SAP, Oracle).  
- Требуется **стандартизация** (например, EDI для госструктур).  

### **Микросервисы подходят, если:**  
- Нужна **быстрая разработка** и частые обновления.  
- Система должна **масштабироваться** в облаке (AWS, Kubernetes).  
- Команды работают **автономно** (2-pizza teams).  

---

## **4. Контрольные вопросы**  
1. **Почему ESB не используется в микросервисах?**  
   *Ответ:* ESB создаёт «бутылочное горлышко». Микросервисы используют API Gateway или Service Mesh (например, Istio).  

2. **Можно ли считать микросервисы «эволюцией SOA»?**  
   *Ответ:* Да, но с упором на автономность сервисов и отказ от централизации.  

3. **Какой подход быстрее адаптируется к изменениям?**  
   - а) SOA  
   - б) **Микросервисы**  
   - *Пояснение:* Микросервисы позволяют обновлять сервисы по отдельности.*  

---

## **5. Аналогия**  
- **SOA** — это как **больница**, где отделения (сервисы) работают по строгим правилам, а главврач (ESB) координирует всё.  
- **Микросервисы** — это **стартап-офис**, где каждый сотрудник (сервис) автономен и решает свою задачу.  

**Итог:**  
- **SOA** — для сложных корпоративных систем.  
- **Микросервисы** — для гибких и масштабируемых облачных приложений.  

